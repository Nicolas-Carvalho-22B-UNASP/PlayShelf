<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Organize sua biblioteca de jogos de PC">
    <meta name="theme-color" content="#6366f1">
    <title>PlayShelf - Sua Biblioteca de Jogos</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üéÆ</text></svg>">
    <link rel="manifest" href="manifest.webmanifest">
    
    <!-- Resource Hints: DNS Prefetch (leve, resolve DNS antecipadamente) -->
    <link rel="dns-prefetch" href="https://api.rawg.io">
    <link rel="dns-prefetch" href="https://hidnjnmpdajzfjmcflum.supabase.co">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://api.steampowered.com">
    <link rel="dns-prefetch" href="https://steamcommunity.com">
    <link rel="dns-prefetch" href="https://cdn.cloudflare.steamstatic.com">
    
    <!-- Resource Hints: Preconnect (estabelece conex√£o completa antecipadamente) -->
    <link rel="preconnect" href="https://api.rawg.io" crossorigin>
    <link rel="preconnect" href="https://hidnjnmpdajzfjmcflum.supabase.co" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://api.steampowered.com" crossorigin>
    <link rel="preconnect" href="https://steamcommunity.com" crossorigin>
    <link rel="preconnect" href="https://cdn.cloudflare.steamstatic.com" crossorigin>
    
    <!-- Otimiza√ß√£o de Fontes: Carregar Font Awesome de forma ass√≠ncrona n√£o bloqueante -->
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"></noscript>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="telaAuth" class="tela-auth">
        <div id="notificacaoAuth" class="notificacao"></div>
        <div class="auth-container">
            <div class="auth-logo">
                <i class="fas fa-gamepad"></i>
                <h1>PlayShelf</h1>
                <p>Organize sua biblioteca de jogos</p>
            </div>
            
            <div id="formLoginTela" class="auth-form ativo">
                <h2>Entrar</h2>
                <form id="formLoginCompleto">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmailTela" required>
                    </div>
                    <div class="form-group">
                        <label>Senha</label>
                        <div class="input-password-wrapper">
                            <input type="password" id="loginSenhaTela" required>
                            <button type="button" class="btn-toggle-password" id="btnToggleLoginSenha" aria-label="Mostrar senha">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn-auth-tela">Entrar</button>
                </form>
                <p class="auth-link-tela">
                    N√£o tem conta? <a href="#" id="linkCadastroTela">Cadastre-se</a>
                </p>
            </div>
            
            <div id="formCadastroTela" class="auth-form">
                <h2>Cadastrar</h2>
                <form id="formCadastroCompleto">
                    <div class="form-group">
                        <label>Usu√°rio</label>
                        <input type="text" id="cadastroUsuarioTela" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="cadastroEmailTela" required>
                    </div>
                    <div class="form-group">
                        <label>Senha</label>
                        <div class="input-password-wrapper">
                            <input type="password" id="cadastroSenhaTela" required>
                            <button type="button" class="btn-toggle-password" id="btnToggleCadastroSenha" aria-label="Mostrar senha">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn-auth-tela">Cadastrar</button>
                </form>
                <p class="auth-link-tela">
                    J√° tem conta? <a href="#" id="linkLoginTela">Entre aqui</a>
                </p>
            </div>
        </div>
    </div>

    <div class="container" id="appContainer" style="display: none;">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <button id="btnMenuMobile" class="btn-menu-mobile">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1><i class="fas fa-gamepad"></i> PlayShelf</h1>
                </div>
                <div class="header-actions">
                    <button id="btnAtualizacoes" class="btn-header btn-atualizacoes" data-tooltip="Veja o <span class='tooltip-destaque'>hist√≥rico de atualiza√ß√µes</span> e novidades do PlayShelf.">
                        <i class="fas fa-clipboard-list"></i>
                        <span id="badgeNovaAtualizacao" class="badge-nova-atualizacao" style="display: none;"></span>
                    </button>
                    <button id="btnNotificacoes" class="btn-header btn-notificacoes" data-tooltip="Respostas em suas avalia√ß√µes. Toque em uma notifica√ß√£o para ir ao jogo.">
                        <i class="fas fa-bell"></i>
                        <span id="badgeNotificacoes" class="badge-notificacoes" style="display: none;"></span>
                    </button>
                    <button id="btnEstatisticas" class="btn-header btn-estatisticas" data-tooltip="M√©tricas da sua biblioteca: totais, zerados, g√™neros e <span class='tooltip-destaque'>hist√≥rico mensal</span>.">
                        <i class="fas fa-chart-bar"></i> Estat√≠sticas
                    </button>
                    <div class="area-usuario">
                        <div class="usuario-badge" id="usuarioBadge" style="cursor: pointer;" data-tooltip="Clique para alterar sua <span class='tooltip-destaque'>foto de perfil</span>.">
                            <i class="fas fa-user-circle"></i>
                            <span id="nomeUsuario"></span>
                        </div>
                        <button id="btnAmigos" class="btn-header btn-amigos" data-tooltip="Adicione amigos, veja as listas deles e <span class='tooltip-destaque'>compare compatibilidade</span> de jogos.">
                            <i class="fas fa-user-friends"></i> Amigos
                            <span id="badgeSolicitacoes" class="badge-notificacoes" style="display: none;"></span>
                        </button>
                        <button id="btnLogout" class="btn-header">Sair</button>
                    </div>
                </div>
            </div>
        </header>
        
        <div id="notificacao" class="notificacao"></div>

        <main>
            <section class="busca-secao">
                <div class="busca-header">
                    <button id="btnVoltar" class="btn-voltar" style="display: none;" aria-label="Voltar para minha lista">
                        <i class="fas fa-arrow-left"></i> Voltar para Minha Lista
                    </button>
                </div>
                <div class="busca-container">
                    <input 
                        type="text" 
                        id="campoBusca" 
                        placeholder="Buscar jogos..."
                        autocomplete="off"
                    >
                    <button id="btnBuscar" aria-label="Buscar jogos" data-tooltip="Busca na base <span class='tooltip-destaque'>RAWG</span>. Digite o nome e clique ou Enter.">
                        <i class="fas fa-search"></i>
                    </button>
                    <button id="btnSteam" class="btn-steam" aria-label="Integra√ß√£o Steam" data-tooltip="Conecte sua conta <span class='tooltip-destaque'>Steam</span> e veja sua biblioteca aqui.">
                        <img src="https://store.steampowered.com/favicon.ico" alt="" width="18" height="18">
                        <span>Steam</span>
                    </button>
                </div>
                <div id="resultadosBusca" class="resultados"></div>
                <button id="btnCarregarMais" class="btn-carregar-mais" style="display: none;">
                    Carregar Mais Jogos
                </button>
            </section>

            <section class="lista-secao">
                <div class="lista-header">
                    <div class="lista-header-titulo">
                        <button id="btnVoltarMinhaLista" class="btn-voltar-minha-lista" style="display: none;" aria-label="Voltar para minha lista">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 id="tituloLista">Minha Lista</h2>
                    </div>
                    <div class="busca-lista-container" data-tooltip="Filtra os jogos da sua lista pelo <span class='tooltip-destaque'>nome</span>.">
                        <input 
                            type="text" 
                            id="campoBuscaLista" 
                            placeholder="Buscar na sua lista..."
                            autocomplete="off"
                        >
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="filtros">
                        <button class="filtro-btn ativo" data-filtro="todos" data-tooltip="Exibe <span class='tooltip-destaque'>todos</span> os jogos da sua lista, em qualquer status.">
                            Todos <span class="contador" id="contador-todos">0</span>
                        </button>
                        <button class="filtro-btn" data-filtro="quero-jogar" data-tooltip="Jogos que voc√™ <span class='tooltip-destaque'>quer jogar</span> um dia. Sua wishlist.">
                            Quero Jogar <span class="contador" id="contador-quero-jogar">0</span>
                        </button>
                        <button class="filtro-btn" data-filtro="jogando" data-tooltip="Jogos que voc√™ est√° <span class='tooltip-destaque-positivo'>jogando agora</span>.">
                            Jogando <span class="contador" id="contador-jogando">0</span>
                        </button>
                        <button class="filtro-btn" data-filtro="zerado" data-tooltip="Jogos que voc√™ <span class='tooltip-destaque-positivo'>terminou</span> (concluiu o jogo).">
                            Zerado <span class="contador" id="contador-zerado">0</span>
                        </button>
                        <button class="filtro-btn" data-filtro="dropado" data-tooltip="Jogos que voc√™ <span class='tooltip-destaque-negativo'>abandonou</span> ou parou de jogar.">
                            Dropado <span class="contador" id="contador-dropado">0</span>
                        </button>
                    </div>
                </div>
                <div id="minhaLista" class="lista-jogos"></div>
            </section>
        </main>
    </div>

    <div id="menuLateralMobile" class="menu-lateral-mobile">
        <div class="menu-lateral-overlay"></div>
        <div class="menu-lateral-conteudo">
            <div class="menu-lateral-header">
                <h2><i class="fas fa-gamepad"></i> Menu</h2>
                <button id="btnFecharMenuMobile" class="btn-fechar-menu-mobile" aria-label="Fechar menu lateral">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="menu-lateral-body">
                <button class="menu-item-mobile" id="menuItemAtualizacoes" data-tooltip="Changelog e novidades do PlayShelf.">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Atualiza√ß√µes</span>
                    <span id="badgeNovaAtualizacaoMenu" class="badge-nova-atualizacao-menu" style="display: none;"></span>
                </button>
                <button class="menu-item-mobile" id="menuItemNotificacoes" data-tooltip="Respostas nas suas avalia√ß√µes.">
                    <i class="fas fa-bell"></i>
                    <span>Notifica√ß√µes</span>
                    <span id="badgeNotificacoesMenu" class="badge-notificacoes-menu" style="display: none;"></span>
                </button>
                <button class="menu-item-mobile" id="menuItemAmigos" data-tooltip="Amigos, listas e compatibilidade.">
                    <i class="fas fa-user-friends"></i>
                    <span>Amigos</span>
                    <span id="badgeSolicitacoesMenu" class="badge-notificacoes-menu" style="display: none;"></span>
                </button>
                <button class="menu-item-mobile" id="menuItemEstatisticas" data-tooltip="Suas estat√≠sticas e compara√ß√£o com amigos.">
                    <i class="fas fa-chart-bar"></i>
                    <span>Estat√≠sticas</span>
                </button>
                <div class="menu-item-mobile usuario-menu-item" id="menuItemUsuario" style="cursor: pointer;">
                    <div class="menu-usuario-foto-container">
                        <i class="fas fa-user-circle" id="menuUsuarioIcone"></i>
                        <img id="menuUsuarioFoto" src="" alt="Foto de perfil" style="display: none;">
                    </div>
                    <span id="nomeUsuarioMenu"></span>
                </div>
                <button class="menu-item-mobile menu-item-logout" id="menuItemLogout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Sair</span>
                </button>
            </div>
        </div>
    </div>

    <div id="telaAvaliacao" class="tela-avaliacao" style="display: none;">
        <div class="avaliacao-container">
            <button class="btn-voltar-avaliacao" aria-label="Voltar para lista de jogos"><i class="fas fa-arrow-left"></i> Voltar</button>
            
            <div class="avaliacao-header">
                <img id="capaJogoModal" src="" alt="Capa do jogo">
                <div class="avaliacao-info">
                    <h2 id="nomeJogoModal"></h2>
                    <p id="lancamentoJogoModal"></p>
                </div>
            </div>
            
            <div class="avaliacao-body">
                <div class="form-group-avaliacao">
                    <label>Status: <span class="icone-tooltip" data-tooltip="Em que etapa est√° com o jogo: <span class='tooltip-destaque'>Quero Jogar</span>, <span class='tooltip-destaque-positivo'>Jogando</span>, <span class='tooltip-destaque-positivo'>Zerado</span> ou <span class='tooltip-destaque-negativo'>Dropado</span>."><i class="fas fa-info-circle"></i></span></label>
                    <select id="selectStatus">
                        <option value="quero-jogar">üéÆ Quero Jogar</option>
                        <option value="jogando">‚ö° Jogando</option>
                        <option value="zerado">‚úÖ Zerado</option>
                        <option value="dropado">‚ùå Dropado</option>
                    </select>
                </div>
                
                <div class="form-group-avaliacao">
                    <label>Sua Avalia√ß√£o: <span class="icone-tooltip" data-tooltip="Sua nota de <span class='tooltip-destaque'>1 a 5 estrelas</span>. Clique nas estrelas para dar a nota; na lista voc√™ pode mudar depois."><i class="fas fa-info-circle"></i></span></label>
                    <div class="avaliacao-estrelas" data-tooltip="Clique em uma estrela para dar de <span class='tooltip-destaque'>1 a 5</span>. Passe o mouse para visualizar. Clique de novo na mesma para remover.">
                        <i class="fas fa-star estrela" data-valor="1"></i>
                        <i class="fas fa-star estrela" data-valor="2"></i>
                        <i class="fas fa-star estrela" data-valor="3"></i>
                        <i class="fas fa-star estrela" data-valor="4"></i>
                        <i class="fas fa-star estrela" data-valor="5"></i>
                    </div>
                    <p class="avaliacao-texto">Sem avalia√ß√£o</p>
                </div>
                
                <div class="form-group-avaliacao">
                    <label>Coment√°rio (opcional):</label>
                    <textarea id="comentarioAvaliacao" placeholder="Escreva sua opini√£o sobre o jogo..." maxlength="500"></textarea>
                    <p class="contador-caracteres"><span id="contadorComentario">0</span>/500</p>
                </div>
            </div>
            
            <div class="avaliacao-botoes">
                <button id="btnConfirmar" class="btn-confirmar-avaliacao">Salvar</button>
                <button id="btnCancelar" class="btn-cancelar-avaliacao">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="telaDetalhes" class="tela-detalhes" style="display: none;">
        <div class="detalhes-container">
            <button class="btn-voltar-detalhes" aria-label="Voltar para lista de jogos"><i class="fas fa-arrow-left"></i> Voltar</button>
            <div class="detalhes-header">
                <img id="capaDetalhes" src="" alt="Capa do jogo">
            </div>
            <div class="detalhes-body">
                <div class="detalhes-titulo-linha">
                    <h2 id="nomeDetalhes"></h2>
                    <span id="badgeSteamDetalhes" class="badge-steam-detalhes" style="display: none;"><img src="https://store.steampowered.com/favicon.ico" alt="" width="20" height="20"><span>Conectado √† sua biblioteca Steam</span></span><span id="horasSteamDetalhes" class="horas-steam-detalhes" style="display: none;"></span>
                </div>
                <div class="detalhes-info">
                    <div class="info-item">
                        <span class="info-label">Lan√ßamento:</span>
                        <span id="lancamentoDetalhes"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Plataformas:</span>
                        <span id="plataformasDetalhes"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">G√™neros:</span>
                        <span id="generosDetalhes"></span>
                    </div>
                    <div class="info-item" id="playtimeContainer" style="display: none;">
                        <span class="info-label">Tempo de Jogo:</span>
                        <span id="playtimeDetalhes"></span>
                    </div>
                    <div class="info-item" id="classificacaoContainer" style="display: none;">
                        <span class="info-label">Classifica√ß√£o:</span>
                        <span id="classificacaoDetalhes"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Desenvolvedora:</span>
                        <span id="desenvolvedoraDetalhes"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Metascore:</span>
                        <span id="metacriticDetalhes"></span>
                    </div>
                </div>
                <div class="detalhes-descricao">
                    <h3>Sobre o jogo</h3>
                    <p id="descricaoDetalhes"></p>
                    <div id="dlcsSecao" class="dlcs-secao" style="display: none;">
                        <h4>Conte√∫do Adicional</h4>
                        <div id="dlcsLista" class="dlcs-lista"></div>
                    </div>
                </div>
                
                <div id="jogosRelacionadosSecao" class="jogos-relacionados-secao">
                    <div class="cards-container">
                        <div class="card-relacionado">
                            <h4><i class="fas fa-layer-group"></i> Jogos da S√©rie</h4>
                            <div id="jogosSerie" class="card-scrollavel">
                                <p class="sem-informacao">Carregando...</p>
                            </div>
                        </div>
                        <div class="card-relacionado">
                            <h4><i class="fas fa-building"></i> Mesma Desenvolvedora / Distribuidora</h4>
                            <div id="jogosDesenvolvedora" class="card-scrollavel">
                                <p class="sem-informacao">Carregando...</p>
                            </div>
                        </div>
                        <div class="card-relacionado">
                            <h4><i class="fas fa-trophy"></i> Conquistas</h4>
                            <div id="conquistasJogo" class="card-scrollavel">
                                <p class="sem-informacao">Carregando...</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="trailersSecao" class="trailers-secao" style="display: none;">
                    <h3><i class="fas fa-play-circle"></i> Trailers e V√≠deos</h3>
                    <div id="listaTrailers" class="lista-trailers"></div>
                </div>
                
                <div id="requisitosHardwareSecao" class="requisitos-hardware-secao" style="display: none;">
                    <h3><i class="fas fa-microchip"></i> Requisitos de Hardware (PC)</h3>
                    <div id="requisitosHardwareConteudo" class="requisitos-hardware-conteudo"></div>
                </div>
                
                <div id="screenshotsSecao" class="screenshots-secao" style="display: none;">
                    <h3><i class="fas fa-images"></i> Capturas de Tela</h3>
                    <div id="listaScreenshots" class="lista-screenshots"></div>
                </div>
                
                <div id="fotosJogoSecao" class="fotos-jogo-secao">
                    <div class="fotos-jogo-header">
                        <h3><i class="fas fa-camera"></i> Fotos da Comunidade <span class="icone-tooltip" data-tooltip="Fotos que <span class='tooltip-destaque'>voc√™ e a comunidade</span> postam do jogo. Voc√™ pode curtir e postar at√© 5 fotos por vez."><i class="fas fa-info-circle"></i></span></h3>
                        <button id="btnPostarFoto" class="btn-postar-foto" style="display: none;" data-tooltip="Adicione o jogo √† sua lista e poste <span class='tooltip-destaque'>at√© 5 fotos</span> com descri√ß√£o opcional.">
                            <i class="fas fa-plus"></i> Postar Foto
                        </button>
                    </div>
                    <div id="listaFotosJogo" class="lista-fotos-jogo">
                        <p class="sem-informacao">Carregando fotos...</p>
                    </div>
                </div>
                
                <div id="amigosComJogo" class="amigos-com-jogo-secao" style="display: none;">
                    <h3><i class="fas fa-user-friends"></i> Amigos que possuem</h3>
                    <div id="listaAmigosComJogo" class="lista-amigos-com-jogo"></div>
                </div>
                
                <div class="avaliacoes-secao">
                    <h3>Avalia√ß√µes da Comunidade</h3>
                    <div id="listaAvaliacoes" class="lista-avaliacoes"></div>
                </div>
                
                <div id="areaAcaoDetalhes" class="detalhes-acao"></div>
            </div>
        </div>
    </div>

    <div id="modalConfirmacao" class="modal">
        <div class="modal-conteudo modal-confirmacao">
            <div class="confirmacao-icone">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 id="tituloConfirmacao">Confirmar a√ß√£o</h3>
            <p id="mensagemConfirmacao">Tem certeza que deseja continuar?</p>
            <div class="confirmacao-botoes">
                <button id="btnConfirmarAcao" class="btn-confirmar-acao">Confirmar</button>
                <button id="btnCancelarAcao" class="btn-cancelar-acao">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modalAtualizacoes" class="modal">
        <div class="modal-conteudo modal-atualizacoes">
            <button class="btn-fechar-modal" id="btnFecharAtualizacoes" aria-label="Fechar modal de atualiza√ß√µes"><i class="fas fa-times"></i></button>
            <h2><i class="fas fa-rocket"></i> Atualiza√ß√µes <span class="icone-tooltip" data-tooltip="Todas as novidades e melhorias do PlayShelf, organizadas por vers√£o e data."><i class="fas fa-info-circle"></i></span></h2>
            <div id="listaAtualizacoes" class="lista-atualizacoes"></div>
        </div>
    </div>

    <div id="modalNotificacoes" class="modal">
        <div class="modal-conteudo modal-notificacoes">
            <button class="btn-fechar-modal" id="btnFecharNotificacoes" aria-label="Fechar modal de notifica√ß√µes"><i class="fas fa-times"></i></button>
            <div class="notificacoes-header">
                <h2><i class="fas fa-bell"></i> Notifica√ß√µes <span class="icone-tooltip" data-tooltip="Avisos quando algu√©m <span class='tooltip-destaque'>responde</span> sua avalia√ß√£o ou sua resposta. Clique em um item para abrir o jogo."><i class="fas fa-info-circle"></i></span></h2>
                <button id="btnMarcarTodasLidas" class="btn-marcar-lidas" data-tooltip="Marca todas as notifica√ß√µes como lidas e limpa a lista.">
                    <i class="fas fa-check-double"></i> Marcar todas como lidas
                </button>
            </div>
            <div id="listaNotificacoes" class="lista-notificacoes"></div>
        </div>
    </div>

    <div id="modalEstatisticas" class="modal">
        <div class="modal-conteudo modal-estatisticas">
            <button class="btn-fechar-modal" id="btnFecharEstatisticas" aria-label="Fechar modal de estat√≠sticas"><i class="fas fa-times"></i></button>
            <h2><i class="fas fa-chart-bar"></i> Dashboard de Estat√≠sticas</h2>
            <div class="estatisticas-tabs">
                <button class="estatisticas-tab ativo" data-tab="pessoais" data-tooltip="Totais, distribui√ß√£o por status, <span class='tooltip-destaque-positivo'>zerados</span>, g√™neros e hist√≥rico mensal de adi√ß√µes.">
                    <i class="fas fa-user"></i> Minhas Estat√≠sticas
                </button>
                <button class="estatisticas-tab" data-tab="comparacao" data-tooltip="Compare suas m√©tricas com amigos e veja a <span class='tooltip-destaque'>compatibilidade</span> de jogos em comum.">
                    <i class="fas fa-users"></i> Comparar com Amigos
                </button>
            </div>
            <div id="conteudoEstatisticas" class="conteudo-estatisticas"></div>
            <div id="conteudoComparacao" class="conteudo-comparacao" style="display: none;"></div>
        </div>
    </div>

    <div id="modalFotoPerfil" class="modal">
        <div class="modal-conteudo modal-foto-perfil">
            <button class="btn-fechar-modal" id="btnFecharFotoPerfil" aria-label="Fechar modal de foto de perfil"><i class="fas fa-times"></i></button>
            <h2><i class="fas fa-user-circle"></i> Foto de Perfil</h2>
            
            <div class="foto-perfil-preview">
                <img id="fotoPerfilPreview" src="" alt="Foto de perfil" style="display: none;">
                <div id="fotoPerfilPlaceholder" class="foto-perfil-placeholder">
                    <i class="fas fa-user-circle"></i>
                </div>
            </div>
            
            <div class="foto-perfil-acoes">
                <label for="inputFotoPerfil" class="btn-upload-foto">
                    <i class="fas fa-upload"></i> Escolher Foto
                </label>
                <input type="file" id="inputFotoPerfil" accept="image/*" style="display: none;">
                
                <button id="btnRemoverFoto" class="btn-remover-foto" style="display: none;">
                    <i class="fas fa-trash"></i> Remover Foto
                </button>
            </div>
            
            <p class="foto-perfil-info">Formatos aceitos: JPG, PNG, GIF (m√°x. 2MB)</p>
        </div>
    </div>

    <div id="modalFotoJogo" class="modal">
        <div class="modal-conteudo modal-foto-jogo">
            <button class="btn-fechar-modal" id="btnFecharFotoJogo" aria-label="Fechar modal de foto"><i class="fas fa-times"></i></button>
            <h2><i class="fas fa-camera"></i> Postar Foto do Jogo <span class="icone-tooltip" data-tooltip="Escolha at√© <span class='tooltip-destaque'>5 fotos</span> (JPG, PNG, GIF, m√°x. 5MB cada). Descri√ß√£o opcional."><i class="fas fa-info-circle"></i></span></h2>
            
            <div class="foto-jogo-preview-container">
                <div id="fotosJogoPreviewLista" class="fotos-jogo-preview-lista" style="display: none;"></div>
                <div id="fotoJogoPreview" class="foto-jogo-preview" style="display: none;">
                    <img id="fotoJogoPreviewImg" src="" alt="Preview da foto">
                </div>
                <div id="fotoJogoPlaceholder" class="foto-jogo-placeholder">
                    <i class="fas fa-image"></i>
                    <p>Nenhuma imagem selecionada</p>
                </div>
            </div>
            
            <div class="form-group-foto">
                <label for="inputFotoJogo" class="btn-upload-foto-jogo">
                    <i class="fas fa-upload"></i> Escolher Foto(s)
                </label>
                <input type="file" id="inputFotoJogo" accept="image/*" multiple style="display: none;">
            </div>
            
            <div class="form-group-foto">
                <label for="descricaoFotoJogo">Descri√ß√£o (opcional): <span class="icone-tooltip" data-tooltip="Texto que aparece junto da(s) foto(s), at√© <span class='tooltip-destaque'>200 caracteres</span>. Opcional."><i class="fas fa-info-circle"></i></span></label>
                <textarea id="descricaoFotoJogo" placeholder="Descreva sua(s) foto(s)..." maxlength="200"></textarea>
                <p class="contador-caracteres"><span id="contadorDescricaoFoto">0</span>/200</p>
            </div>
            
            <div class="foto-jogo-botoes">
                <button id="btnConfirmarFotoJogo" class="btn-confirmar-foto-jogo" disabled>
                    <i class="fas fa-check"></i> Postar
                </button>
                <button id="btnCancelarFotoJogo" class="btn-cancelar-foto-jogo">
                    Cancelar
                </button>
            </div>
            
            <p class="foto-jogo-info">Formatos aceitos: JPG, PNG, GIF (m√°x. 5MB por foto, at√© 5 fotos)</p>
        </div>
    </div>

    <div id="modalAmigos" class="modal">
        <div class="modal-conteudo modal-amigos">
            <button class="btn-fechar-modal" id="btnFecharAmigos" aria-label="Fechar modal de amigos"><i class="fas fa-times"></i></button>
            <h2>Amigos</h2>
            
            <div class="amigos-tabs">
                <button class="tab-amigos ativo" data-tab="lista" data-tooltip="Lista de amigos. Clique em um para ver a <span class='tooltip-destaque'>biblioteca</span> dele.">Meus Amigos</button>
                <button class="tab-amigos" data-tab="estatisticas" data-tooltip="Ver <span class='tooltip-destaque-positivo'>compatibilidade</span> de jogos entre voc√™ e cada amigo."><i class="fas fa-chart-line"></i> Compatibilidade</button>
                <button class="tab-amigos" data-tab="adicionar" data-tooltip="Envie solicita√ß√£o usando o <span class='tooltip-destaque'>nick exato</span> do usu√°rio.">Adicionar</button>
                <button class="tab-amigos" data-tab="solicitacoes" data-tooltip="Solicita√ß√µes pendentes. Aceite ou recuse cada uma.">Solicita√ß√µes <span id="contadorSolicitacoes" class="contador-badge"></span></button>
            </div>
            
            <div id="tabLista" class="tab-content ativo">
                <div id="listaAmigos" class="lista-amigos-container"></div>
            </div>
            
            <div id="tabAdicionar" class="tab-content">
                <div class="form-adicionar-amigo">
                    <span class="icone-tooltip" data-tooltip="Use o nick <span class='tooltip-destaque'>exatamente</span> como o usu√°rio cadastrou. Ex.: joao123"><i class="fas fa-info-circle"></i></span>
                    <input type="text" id="inputNickAmigo" placeholder="Digite o nick do usu√°rio..." />
                    <button id="btnEnviarSolicitacao" data-tooltip="Envia a solicita√ß√£o de amizade. O usu√°rio ver√° em Solicita√ß√µes.">Enviar Solicita√ß√£o</button>
                </div>
            </div>
            
            <div id="tabSolicitacoes" class="tab-content">
                <div id="listaSolicitacoes" class="lista-solicitacoes-container"></div>
            </div>
            
            <div id="tabEstatisticas" class="tab-content">
                <div id="listaEstatisticas" class="lista-estatisticas-container"></div>
            </div>
        </div>
    </div>

    <div id="modalSteam" class="modal">
        <div class="modal-conteudo modal-steam">
            <button class="btn-fechar-modal" id="btnFecharSteam" aria-label="Fechar modal Steam"><i class="fas fa-times"></i></button>
            <h2><img src="https://store.steampowered.com/favicon.ico" alt="" width="24" height="24"><span class="steam-modal-marca">Steam</span></h2>
            <div class="steam-modal-body">
                <div id="steamDesconectado" class="steam-desconectado">
                    <p>Conecte sua conta Steam para ver sua biblioteca de jogos aqui no PlayShelf. O login √© feito na janela oficial da Steam.</p>
                    <button id="btnConectarSteam" class="btn-conectar-steam" data-tooltip="Abre a <span class='tooltip-destaque'>janela oficial da Steam</span> para login seguro. Sua biblioteca aparecer√° aqui.">
                        <img src="https://store.steampowered.com/favicon.ico" alt="" width="20" height="20"> Conectar √† Steam
                    </button>
                </div>
                <div id="steamConectado" class="steam-conectado" style="display: none;">
                    <div class="steam-conectado-header">
                        <div class="steam-usuario-badge">
                            <img src="https://store.steampowered.com/favicon.ico" alt="" width="16" height="16" class="steam-usuario-icone">
                            <span id="steamNomeUsuario" class="steam-nome-usuario"></span>
                        </div>
                        <button id="btnDesconectarSteam" class="btn-desconectar-steam" data-tooltip="Remove a vincula√ß√£o da sua conta <span class='tooltip-destaque'>Steam</span>. Sua biblioteca deixa de ser exibida aqui.">Desconectar</button>
                    </div>
                    <div class="steam-busca-container">
                        <input type="text" id="campoBuscaSteam" class="campo-busca-steam" placeholder="Buscar na sua biblioteca..." autocomplete="off" aria-label="Buscar jogos na biblioteca Steam">
                        <i class="fas fa-search steam-busca-icone"></i>
                    </div>
                    <h3 class="steam-biblioteca-titulo">Sua biblioteca <span id="steamBibliotecaContador" class="steam-biblioteca-contador"></span></h3>
                    <div id="steamBibliotecaLista" class="steam-biblioteca-lista"></div>
                    <div id="steamBibliotecaLoading" class="steam-biblioteca-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i> Carregando jogos...
                    </div>
                    <div id="steamBibliotecaErro" class="steam-biblioteca-erro" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="modalEscolherJogoSteam" class="modal">
        <div class="modal-conteudo modal-escolher-jogo-steam">
            <button class="btn-fechar-modal" id="btnFecharEscolherJogoSteam" aria-label="Fechar"><i class="fas fa-times"></i></button>
            <h2><span id="escolherJogoSteamTituloTexto">Escolher jogo para vincular</span> <span class="icone-tooltip" id="escolherJogoSteamTooltip" data-tooltip=""><i class="fas fa-info-circle"></i></span></h2>
            <p id="escolherJogoSteamSubtitulo" class="escolher-jogo-steam-subtitulo"></p>
            <div id="escolherJogoSteamLoading" class="escolher-jogo-steam-loading" style="display: none;"><i class="fas fa-spinner fa-spin"></i> Buscando jogos semelhantes...</div>
            <div id="escolherJogoSteamLista" class="escolher-jogo-steam-lista"></div>
            <div id="escolherJogoSteamRodape" class="escolher-jogo-steam-rodape">
                <button type="button" id="btnEscolherJogoSteamFallback" class="btn-escolher-jogo-steam-fallback">Usar o nome da Steam (n√£o encontrado na base)</button>
            </div>
        </div>
    </div>

    <div id="modalScreenshot" class="modal-screenshot">
        <div class="modal-screenshot-conteudo">
            <button class="btn-fechar-screenshot" aria-label="Fechar visualiza√ß√£o de screenshot" data-tooltip="Fechar"><i class="fas fa-times"></i></button>
            <span class="icone-tooltip modal-screenshot-dica" data-tooltip="Use as <span class='tooltip-destaque'>setas</span> para navegar entre fotos. Clique fora ou no X para fechar."><i class="fas fa-info-circle"></i></span>
            <button class="screenshot-navegacao anterior" aria-label="Screenshot anterior" data-tooltip="Foto anterior"><i class="fas fa-chevron-left"></i></button>
            <img id="screenshotAmpliada" src="" alt="Screenshot ampliado">
            <button class="screenshot-navegacao proxima" aria-label="Pr√≥ximo screenshot" data-tooltip="Pr√≥xima foto"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
    <script src="supabase.js" defer></script>
    <script src="script.js" defer></script>
</body>
</html>
